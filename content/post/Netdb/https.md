---
title: "Https协议与加密算法的运用"
date: 2021-02-27T18:41:40+08:00
draft: true
---

## 一、什么是Https

HTTPS （全称：Hyper Text Transfer Protocol over SecureSocket Layer），是以安全为目标的 HTTP 通道，在HTTP的基础上通过传输加密和身份认证保证了传输过程的安全性。

### 传统http传输的缺点

1. 通信使用明文，传输内容可能被窃听。
2. 不验证后通信方的身份，容易伪装进行请求。
3. 无法保证报文的完整性，可能遭遇篡改。

### 中间人攻击

当A、B通信时，C不主动去为其“转发”，只是把他们的传输的数据备份，以获取用户网络的活动，包括账户、密码等敏感信息，这种被动攻击也是非常难被发现的。


## 二、Https用到了哪些加密算法？

### 使用对称加密:

如果通信双方都各自持有同一个密钥，且没有别人知道，这两方的通信安全当然是可以被保证的（除非密钥被破解）。然而最大的问题就是这个密钥怎么让传输的双方知晓，同时不被别人知道。

如果浏览器内部预存了每个网站的密钥，理论上用对称加密是可行的，但是并不现实。

### 使用非对称加密:

某网站拥有用于非对称加密的公钥A、私钥A’；浏览器拥有用于非对称加密的公钥B、私钥B’。

浏览器像网站服务器请求，服务器把公钥A明文给传输浏览器。

浏览器把公钥B明文传输给服务器。

之后浏览器向服务器传输的所有东西都用公钥A加密，服务器收到后用私钥A’解密。由于只有服务器拥有这个私钥A’可以解密，所以能保证这条数据的安全。

服务器向浏览器传输的所有东西都用公钥B加密，浏览器收到后用私钥B’解密。同上也可以保证这条数据的安全。

## 三、非对称加密与对称加密的性能分析

### RSA：

1. 随机选择两个不相等的质数p和11和13。（实际应用中，这两个质数越大，就越难破解。）

2. 计算p和q的乘积n。n = 11×13 = 143

      n的长度就是密钥长度。143写成二进制是10001111，一共有8位，所以这个密钥就是8位。

     实际应用中，RSA密钥一般是1024位，重要场合则为2048位。

3. 计算n的欧拉函数φ(n)。称作L，根据公式φ(n) = (p-1)(q-1) 算出φ(143)等于10*12，即120.

4. 随机选择一个整数e，也就是公钥当中用来加密的那个数字条件是1< e < φ(n)，且e与φ(n) 互质。

     在1到3120之间，随机选择了17。（实际应用中，常常选择65537。）

5. 计算e对于φ(n)的模反元素d。也就是密钥当中用来解密的那个数字

     e*d ≡ 1 (mod φ(n))，这个公式简单的说就是 e*d除以φ(N)得到的余数为1，

     即e*d - 1 = kφ(n)，已知 e = 7 φ(n) = 120，7d + 120*k = 1。

    ```cpp
     辗转相除法计算d：

     120 = 7 * 17 + 1；
     17 = 17 * 1；
     1 = 120 * 1 + 7 * (-17)；
     1 = 120 * 1 + 7 *(-17)；
    最终得出，d = -17 k = 1；
    ```

    虽然我们得到了 d=-17但 在rsa中 d必须是一个正整数,所以得到 e对φ(n)的模逆元 为 120 + （-17）也就是103。

    上面的例子 公钥 (143,7) 私钥(143, 103)。

6. 将n和e封装成公钥，n和d封装成私钥。

     在例子中，n=3233，e=17，d=2753，所以公钥就是 (3233,17)，私钥就是（3233, 2753）。

7. 同余方程

```cpp
求关于x的同余方程ax≡1(mod b) 的最小正整数解
ax mod b = 1，它的实质是 ax + by = 1。
anxn + bnyn = gcd(an,bn)。
gcd:最大公因数，辗转相除法。
int gcd(int a,int b) 
{ 
if(b==0) return a; 
else return gcd(b,a%b); 
}
```