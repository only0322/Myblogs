---
title: "23种设计模式归纳"
date: 2020-06-11T22:24:14+08:00
draft: true
---


## 设计模式的定义

软件设计模式（Design pattern），又称设计模式，是一套被反复使用、多数人知晓的、经过分类编目的、代码设计经验的总结。使用设计模式是为了可重用代码、让代码更容易被他人理解、保证代码可靠性、程序的重用性。

开闭原则：鼓励扩展，但拒绝（或不推荐）修改。比如BFF中经常出现v2,v3的函数。

## 设计模式的分类

总体来说设计模式分为三大类：

创建型模式，共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。

结构型模式，共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式。

行为型模式，共十一种：策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。


### 一、单例模式

概念：

1. 单例类只能有一个实例。
2. 单例类必须自己创建自己的唯一实例。
3. 单例类必须给所有其他对象提供这一实例。



以Node.js代码为例：


```js
//类定义
class HttpManager {
    constructor() {
        
    }
}

exports.http = new HttpManager();

//main.js

const HttpManager = require('./HttpManager.js');
async function main() {
    let http = new HttpManager();
    global.http = http;
}

main();
```

优点：
1. 在内存中只有一个实例，减少内存开销，同时不需要考虑资源的多重占用。
2. 在Nodejs中，这样可以全局地调用这些类的方法，不需要导入模块了。

缺点：
1. 在Vscode中，这样实现单例类不能进行代码跳转，极其考验对系统的理解能力。
2. 没有接口，不能继承（私有），与单一职责原则冲突，一个类应该只关心内部逻辑，而不关心外面怎么样来实例化。

**单例类设计出来，可能内部也没有资源加解锁的逻辑？所以不让别人继承？**

### 二、工厂模式

简单工厂模式属于类的创建型模式,又叫做静态工厂方法模式。通过专门定义一个类来负责创建其他类的实例，被创建的实例通常都具有共同的父类。 

简单的例子：

基类：水果。

使用时：继承水果类，派生出各种的水果。


实际的场景：

图形化库中，单行的编辑栏和多行的编辑栏，都是继承了基类的编辑功能，只是各自进行了扩展。

